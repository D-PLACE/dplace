<ng-include src="'/static/partials/navbar.html'"></ng-include>
<div class="row">
    <div class="family col-md-5">
        <div class="row">
            <span>
                <p class="pull-left lead">Search Criteria <span ng-show="languageSelections.length + eaVariableSelections.length">({{ languageSelections.length + eaVariableSelections.length }})</span></p>
                <a class="pull-right btn btn-primary" href="" ng-click="clearLanguages()">Clear All</a>
            </span>
        </div>
        <!-- Would be good to have an accordion here -->
        <!-- Language Families -->
        <div class="row panel panel-default language_families">
            <div class="panel-heading">
                <input ng-model="family_filter" class="form-control" placeholder="Filter Language Families"></input>
            </div>
            <div class="panel-body scrollable">
                <ul class="list-unstyled">
                    <li ng-repeat="family in families | filter:family_filter">
                        <label class="light">
                            <input type="checkbox"
                                   ng-model="family.selected"
                                   name="family_{{ family.id}}"
                                   ng-change="updateFamily(family)"/>
                            {{ family.name }}
                        </label>
                        <div ng-show="family.selected">
                            <ul class="list-unstyled indent1">
                                <li ng-repeat="subfamily in family.subfamilies">
                                    <label class="light">
                                    <input type="checkbox"
                                           ng-model="subfamily.selected"
                                           name="subfamily_{{ subfamily.id }}"
                                           ng-change="updateSubfamily(subfamily)"/>
                                        {{ subfamily.name }}
                                    </label>
                                    <div ng-show="subfamily.selected">
                                        <ul class="list-unstyled indent2">
                                            <li ng-repeat="subsubfamily in subfamily.subsubfamilies">
                                                <label class="light">
                                                <input type="checkbox"
                                                       ng-model="subsubfamily.selected"
                                                       name="subfamily_{{ subsubfamily.id }}"
                                                       ng-change="updateSubsubfamily(subsubfamily)"
                                                       />
                                                    {{ subsubfamily.name }}
                                                </label>
                                            </li>
                                        </ul>
                                    </div>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="row panel panel-default ea_variables">
            <div class="panel-heading">
                <input ng-model="eaFilter" class="form-control" placeholder="Filter Ethnographic Atlas Variables"></input>
            </div>
            <div class="panel-body scrollable">
                <ul class="list-unstyled">
                    <li ng-repeat="eaVariable in eaVariables | filter:eaFilter">
                        <label class="light">
                            <input type="checkbox"
                                   ng-model="eaVariable.expanded"
                                   name="ea_variable_{{ eaVariable.id }}"
                                   ng-change="updateEAVariable(eaVariable)"/>
                            {{ eaVariable.number }}: {{ eaVariable.name }}
                        </label>
                        <div ng-show="eaVariable.expanded">
                            <ul class="list-unstyled indent1">
                                <li ng-repeat="code in eaVariable.codes">
                                    <label class="light">
                                    <input type="checkbox"
                                           ng-model="code.selected"
                                           name="code_{{ code.id }}"
                                           ng-change="updateCode(code)"/>
                                        {{ code.code }}: {{ code.description }}
                                    </label>
                                </li>
                            </ul>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
    </div>
    <div class="col-md-1"></div>
    <div class="results col-md-6">
        <div class="row">
            <span>
                <p class="pull-left lead">Societies <span ng-show="societies.length">({{ societies.length }})</span></p>
                <a class="pull-right btn btn-primary" href="" ng-click="getSocieties()">Get Societies</a>
            </span>
        </div>
        <tabset>
            <tab heading="Table">
                <div class="row">
                    <div ng-hide="societies.length">
                        <p class="text-center help-block search-help">Choose one or more language families, then click <strong>Get Societies</strong>.</p>
                    </div>
                    <table class="table" ng-show="societies.length">
                        <tr>
                            <th>Name</th>
                            <th>Id</th>
                            <th>ISO Code</th>
                            <th>Location</th>
                        </tr>
                        <tr ng-repeat="society in societies">
                            <td><a ng-href="/society/{{ society.id }}" target="_blank">{{ society.name }}</a></td>
                            <td>{{ society.ext_id }}</td>
                            <td>{{ society.iso_code }}</td>
                            <td>{{ society.location.coordinates }}</td>
                        </tr>
                    </table>
                </div>
            </tab>
            <tab heading="Map">
                <ng-include src="'/static/partials/map.html'"></ng-include>
            </tab>
        </tabset>



    </div>

</div>